#!/bin/bash
#vim: filetype=sh

if [[ $# -eq 0 ]]; then
    echo "usage:"
    echo "install [...package names]"
    exit 1
fi

aurInstallCommand="yaourt -S"

function installFromArch()
{
    sudo pacman -Syu ${1} --noconfirm
}

function installFromAur()
{
    if ! which yaourt > /dev/null; then
        mkdir -p ${BUILD_LOCATION:-${HOME}/builds}
        pushd ${BUILD_LOCATION:-${HOME}/builds}
        git clone https://aur.archlinux.org/yaourt.git
        cd yaourt &&\
            makepkg -sri --noconfirm
        popd
    fi
    yaourt -S ${1}
}

for package in "${@}"; do
    installFromArch ${package}

    if [[ $? -ne 0 ]]; then
        installFromAur ${package}
    fi
done
