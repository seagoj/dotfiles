#!/usr/bin/env bash

package=dmenu
localRepo="${CODE:-HOME/code}"/suckless/"${package}"
remoteRepo=git://git.suckless.org/"${package}"
version="${DMENU_VERSION:-4.9}"
patches=(
    "line-height"
    "fuzzymatch"
)

. "$XDG_FUNCTIONS_DIR"/git.sh
. "$XDG_FUNCTIONS_DIR"/suckless.sh

git::clone "${remoteRepo}" "${localRepo}" 2>/dev/null
cd "$localRepo" && \
    suckless::applyToolPatches "${patches[@]}" && \
    suckless::install

"${package}" ${@}
