#!/bin/zsh
zmodload zsh/mapfile
dots=~/code/dotfiles
FNAME=$dots/bin/dot.list

if [ "$1" != "" ] ; then
    cp -R ~/$1 $dots/$1
    echo "$1" >> $FNAME
    echo $1 added to $FNAME
fi

FLINES=( "${(f)mapfile[$FNAME]}" )

for link in $FLINES
do
    rm -R ~/$link
    ln -s $dots/$link ~/$link
    ls --color=tty -logh ~/$link
done
