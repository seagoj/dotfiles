#!/bin/sh

package=dwm
localRepo="${CODE:-HOME/code}"/suckless/${package}
remoteRepo="git://git.suckless.org/${package}"
patches=(
    # http://dwm.suckless.org/patches/fibonacci/dwm-fibonacci-5.8.2.diff
    http://dwm.suckless.org/patches/autostart/dwm-autostart-20161205-bb3bd6f.diff
    # http://dwm.suckless.org/patches/uselessgap/dwm-uselessgap-6.2.diff
    https://dwm.suckless.org/patches/fakefullscreen/dwm-fakefullscreen-20170508-ceac8c9.diff
)

. "$XDG_FUNCTIONS_DIR"/git.sh
. "$XDG_FUNCTIONS_DIR"/suckless.sh

git::clone "${remoteRepo}" "${localRepo}" # 2>/dev/null
cd "$localRepo" && \
    suckless::applyPatches "${patches[@]}" && \
    suckless::install

"${package}" ${@}
